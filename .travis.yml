language: node_js
node_js:
  - "stable"
cache:
  directories:
    - node_modules
script:
  - npm test
  - npm run build
deploy:
  provider: s3
  access_key_id: AKIAIBRONXKAKRYHWEIA
  secret_access_key:
    secure: eslsXDLKw8U1BhYG/UqBhcBNgaDYsMgO7H3GfTPcG31mrMIeWg7qcLYwTklCzZaWdmSxGnH5gCefx4NCbQLFWiCmtIUA+06aMDFdOeodAeVcZ5HEhdFimgW8poi5KQ4LjO+Dhvb1sFft1MxOEOmf4McXhgk8Qx5v+Dmtxta5i76SR8Jn+9DLF5rmf3w2OKMi709K16KVASd2NSCIdxXhQYp+yM1yywYHRtDM8V6p//SthaIj5usAJblZz3DNtMVVbCEnFEJuv8ywgit+Sy26W2bx0DtssUloHSU/YXGNxHIwRWynGv2p3wnQhKR7Nwo7L4F4hvxLf9B5XTVq9nPdLX9SYzBdPsK4TUd+YCJqbr5eXAlR1TK13+myqrcDMsiWGMaVdk4/QROo1Prrc4FuCQS0VI32WejVb5QEWSI8ll2s0Nbd99UqtVtN80CL0ZuCzmr3L2uuX9tLLlY+seJN/XSIRvGlTQ/zoFJtCdNMuOnjCOcAinLdNHxp2ZEPlQ0GkNRkBdGwv18zctztTibxORKSH/4+RDftTMSYUps9ufIuiwf0wGpLoa53EtiPuRrhZn0W6pMko7byFDkuFamlOpPKHbmiPBwqm/TkMlvKXYJxGHBZ+lHI86W7R/HwxE/FTgZZfv5yp8rgJiZM45whxhGJ+LYO2dbzXvBfbA8wv3U=
  bucket: ad-react-shopping-cart
  local-dir: build
  skip_cleanup: true
  #acl: ''
  on:
    repo: ahdeshmukh/react-shopping-cart
after_deploy:
  - aws configure set preview.cloudfront true
  - aws cloudfront create-invalidation --distribution-id E2A2VKZOQ8XTDK
